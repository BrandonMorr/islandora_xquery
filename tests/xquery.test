<?php

/**
 * @file
 * Unit tests for XQuery wrapper functions.
 */

class XQueryUnitTestCase extends DrupalUnitTestCase {

  /**
   * Gets info to display to describe this test.
   *
   * @see DrupalUnitTestCase::getInfo()
   */
  public static function getInfo() {
    return array(
      'name' => 'XQuery Unit Tests',
      'description' => 'Ensure that XQuery functions correctly.',
      'group' => 'Islandora',
    );
  }

  /**
   * Sets up the requirements for this test.
   *
   * @see DrupalUnitTestCase::setUp()
   */
  public function setUp() {
    parent::setUp('islandora_xquery');
    module_load_include('inc', 'islandora_xquery', 'includes/utilities');
  }

  /**
   * Test running XQuery against fixtures.
   */
  public function testXQuery() {
    $version = islandora_xquery_get_zorba_version();
    if ($version === FALSE || version_compare(ISLANDORA_XQUERY_ZORBA_REQUIRED_VERSION, $version, '>')) {
      $this->fail('Valid version of Zorba was not found.');
      return;
    }
    else {
      $this->pass('Valid version of Zorba was found.');
    }

  }

}
